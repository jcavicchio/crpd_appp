<html>
<head>
<title></title>
</head>
<body>
<h1>/home/cavicchio/Downloads/heptane_svn/benchmarks/select/select.c</h1> <br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td><h2>Frequency</h2></td><th><h2>Source</h2></th></tr><tr><td> 0</td>
<td><tt><pre>/*************************************************************************/</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*   SNU-RT Benchmark Suite for Worst Case Timing Analysis               */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*   =====================================================               */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                              Collected and Modified by S.-S. Lim      */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                           sslim@archi.snu.ac.kr       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                         Real-Time Research Group      */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                        Seoul National University      */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*        < Features > - restrictions for our experimental environment   */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*          1. Completely structured.                                    */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*               - There are no unconditional jumps.                     */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*               - There are no exit from loop bodies.                   */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                 (There are no 'break' or 'return' in loop bodies)     */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*          2. No 'switch' statements.                                   */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*          3. No 'do..while' statements.                                */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*          4. Expressions are restricted.                               */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*               - There are no multiple expressions joined by 'or',     */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                'and' operations.                                      */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*          5. No library calls.                                         */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*               - All the functions needed are implemented in the       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                 source file.                                          */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*************************************************************************/</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*  FILE: select.c                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*  SOURCE : Numerical Recipes in C - The Second Edition                 */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*  DESCRIPTION :                                                        */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*     A function to select the Nth largest number in the floating poi-  */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*     nt array arr[].                                                   */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*     The parameters to function select are k and n. Then the function  */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*     selects k-th largest number out of n original numbers.            */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*  REMARK :                                                             */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*  EXECUTION TIME :                                                     */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*                                                                       */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*************************************************************************/</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>#include <annot.h></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>#define SWAP(a,b) temp=(a);(a)=(b);(b)=temp;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>float arr[20] = {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  5, 4, 10.3, 1.1, 5.7, 100, 231, 111, 49.5, 99,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  10, 150, 222.22, 101, 77, 44, 35, 20.54, 99.99, 888.88</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>float select(unsigned long k, unsigned long n)</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>{</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	unsigned long i,ir,j,l,mid;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	float a,temp;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	int flag, flag2;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>	l=1;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>	ir=n;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>	flag = flag2 = 0; </pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 17 </td>
<td><tt><pre>	while (!flag) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	  ANNOT_MAXITER(16); // Courtesy of MDH. - BL</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>16 </td>
<td><tt><pre>	  if (ir <= l+1) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>	    if (ir == l+1) </pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>	      if (arr[ir] < arr[l]) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>		SWAP(arr[l],arr[ir])</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>		  }</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>	    flag = 1;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	  } else if (!flag) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    mid=(l+ir) >> 1;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    SWAP(arr[mid],arr[l+1])</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	      if (arr[l+1] > arr[ir]) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>		SWAP(arr[l+1],arr[ir])</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>		  }</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    if (arr[l] > arr[ir]) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>14 </td>
<td><tt><pre>	      SWAP(arr[l],arr[ir])</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>		}</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    if (arr[l+1]> arr[l]) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>14 </td>
<td><tt><pre>	      SWAP(arr[l+1],arr[l])</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>		}</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    i=l+1;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    j=ir;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    a=arr[l];</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 30 </td>
<td><tt><pre>	    while (!flag2) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	      ANNOT_MAXITER(1); // Courtesy of MDH. - BL</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	      i++; </pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 30 </td>
<td><tt><pre>	      while (arr[i] < a) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>		ANNOT_MAXITER(1); // Courtesy of MDH. - BL</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>		i++;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	      }</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	      j--; </pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 255 </td>
<td><tt><pre>	      while (arr[j] > a) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>		ANNOT_MAXITER(16); // Courtesy of MDH. - BL</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>240 </td>
<td><tt><pre>		j--;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	      }</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	      if (j < i) flag2 = 1;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	      if (!flag2) SWAP(arr[i],arr[j]);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	      </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	    }</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    arr[l]=arr[j];</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    arr[j]=a;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    if (j >= k) ir=j-1;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>15 </td>
<td><tt><pre>	    if (j <= k) l=i;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	  </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>	}</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>	return arr[k];</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>main()</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>{</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>  select(10, 20);</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
</table>
</body> </html>
